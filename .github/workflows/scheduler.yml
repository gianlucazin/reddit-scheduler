name: Reddit Scheduler Cron

on:
  # schedule:
  #   # Run every 10 minutes
  #   - cron: '*/10 * * * *'
  workflow_dispatch: # Allow manual triggering

jobs:
  run-scheduler:
    runs-on: ubuntu-latest
    steps:
      - name: Call Scheduler API
        run: |
          if [ -z "${{ secrets.SCHEDULER_AUTH_TOKEN }}" ]; then
            curl -X GET "${{ secrets.SCHEDULER_API_URL }}"
          else
            curl -X GET "${{ secrets.SCHEDULER_API_URL }}" \
              -H "Authorization: Bearer ${{ secrets.SCHEDULER_AUTH_TOKEN }}"
          fi
        env:
          SCHEDULER_API_URL: ${{ secrets.SCHEDULER_API_URL }}
          SCHEDULER_AUTH_TOKEN: ${{ secrets.SCHEDULER_AUTH_TOKEN }}
